; PlatformIO Project Configuration for Teensy 4.1 Control Surface
; Target: 8-knob control surface with SCH-BUS/1 protocol
; MCU: Teensy 4.1 (ARM Cortex-M7 @ 600 MHz)
; Transport: Native USB (SCH-BUS/1 protocol)

[env:teensy41]
; Platform and board
platform = teensy
board = teensy41
framework = arduino

; Build options
build_flags =
    -DUSB_SERIAL
    -DENABLE_USB_SERIAL
    -Iinclude
    -I../runtime_cpp/include
    -std=gnu++17
    -O2

; Serial monitor (for debugging)
monitor_speed = 115200

; Library dependencies
lib_deps =
    Encoder
    Adafruit ISK29FRSH4
    Wire

; Testing configuration
test_framework = unity
test_build_src = yes

; Upload settings
upload_protocol = teensy-gui
; Alternative: teensy-cli for headless systems

; Debug configuration (future: J-Link/ST-Link)
debug_tool = jlink
debug_init_break = tbreak setup

; Project-specific configuration
[platformio]
description = White Room Hardware Platform - Reference Control Surface (8 knobs + LEDs)
default_envs = teensy41

; Advanced options
; Extra scripts can be added here for pre/post build actions
; extra_scripts = pre:custom_script.py
